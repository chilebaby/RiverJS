{"version":3,"file":"dist/river.min.js","sources":["lib/cmd.js","lib/engine.js","lib/scenario.js","lib/core/Date.js","lib/core/model.js","lib/core/tool.js","lib/grammer/jbind.js","lib/grammer/jchange.js","lib/grammer/jclick.js","lib/grammer/jcompile.js","lib/grammer/repeat.js","lib/grammer/scope.js"],"names":["_$river","sandbox","boxes","create","key","fn","toLowerCase","run","context","need","call","undefined","module","define","main","loadGrammer","me","checkAttributes","doc","fatherContext","state","hasRepeat","newContext","scope","node","eom","reg","attributes","length","tool","loop","attr","nodeName","value","nodeValue","replace","grammer","inherit","isFunction","checkText","test","push","element","expression","checkChildren","childNodes","child","scan","this","document","addEventListener","_trigger","type","event","createEvent","initEvent","dispatchEvent","trigger","toString","format","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","RegExp","$1","getFullYear","substr","k","getDateByCity","jetleg","now","Date","local","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","parseInt","getUTCMinutes","getUTCSeconds","date","f","update","isString","isNumber","ele","isArray","item","index","isObject","each","Model","ns","ref","_eoms","lasts","$$ns","x","last","tools","prototype","apply","_eom","val","watch","inject","source","Object","target","F","hasOwnProperty","y","z","compile","str","container","createElement","innerHTML","guid","uid","i","n","random","array","obj","log","console","Function","arguments","no","jbind","newValue","oldValue","interval","onfocus","setInterval","onblur","clearInterval","change","onchange","click","param","match","args","split","onclick","repeat","afterIn","beforeIn","pro","data","parentNode","removeChild","frg","createDocumentFragment","_r","removeAttribute","forEach","d","_n","cloneNode","m","trans","appendChild","Array","$tool","_scope","model"],"mappings":"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"}