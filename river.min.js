var _$river={sandbox:function(){var e={};return{create:function(n,t){n=n.toLowerCase(),e[n]=t},run:function(n){var t={need:function(n){return n=n.toLowerCase(),e[n]&&e[n].call(t)||void 0}};n.call(t)}}}};_$river.module=_$river.sandbox();var define=_$river.module.create,main=_$river.module.run;define("river.engine",function(){function e(e){return i.need("river.grammer."+e)}function n(n,r){var o={hasRepeat:!1,context:r},i={scope:{},node:n,eom:{},reg:a};return n.attributes&&n.attributes.length&&c.loop(n.attributes,function(u){var s=u.nodeName,l=u.nodeValue.replace(a,""),d=e(s);"repeat"===s&&(o.hasRepeat=!0),"scope"===s?(o.context=i,d.call(o.context,l),r&&c.inherit(o.context.scope,r.scope)):c.isFunction(d)&&(o.context?(o.context.node=n,d.call(o.context,l),t(u,o.context)):(o.context=i,e("scope").call(o.context,l),d.call(o.context,l)))}),o}function t(e,n){if(a.test(e.nodeValue)){var t=e.nodeValue.replace(/\r|\n/g,"").replace(a,"");n.eom[t]||(n.eom[t]=[]),n.eom[t].push({element:e,expression:e.nodeValue}),e.nodeValue=e.nodeValue.replace(/\r|\n/g,"").replace(/{{.*}}/,n.scope[t])}}function r(e,n){e.childNodes&&e.childNodes.length&&c.loop(e.childNodes,function(e){o(e,n)})}function o(e,o){var i=n(e,o);i.context&&t(e,i.context),"CODE"===e.nodeName||"PRE"===e.nodeName||i.hasRepeat||(i.context?r(e,i.context):r(e))}var i=this,c=i.need("river.core.tools"),a=/.*{{\s*|\s*}}.*/g;return{scan:o}}),main(function(){var e=this;document.addEventListener("DOMContentLoaded",function(){var n=e.need("river.engine").scan;n(document)})}),define("river.scenario",function(){function e(e,n){var t=document.createEvent("MouseEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}this.need("river.core.tools");return{trigger:e}}),define("river.core.Date",function(){function e(e){var n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var t in n)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[t]:("00"+n[t]).substr((""+n[t]).length)));return e}var n=function(n){var t=new Date,r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()+parseInt(n),t.getUTCMinutes(),t.getUTCSeconds());return{date:r,toString:function(n){return r.toString=e,r.toString(n)}}};return{getDateByCity:n}}),define("river.core.model",function(){function e(n,t,r){a(n)||u(n)?l(t,function(e){e.expression&&(e.element.nodeValue=e.expression.replace(/{{.*}}/,n))}):i(n)?(r&&n.length>r.length?t[index].element.parentNode.appendChild(t[index].element.cloneNode(!0)):r&&n.length<r.length&&t[index].element.parentNode.removeChild(t[index].element),l(n,function(n){e(n,t,r)})):c(n)&&s(n,function(n){e(n,t,r)})}function n(e,n,i){r[e]=n,o[e]={},this.$$ns=e;for(var c in i)this[c]=i[c],o[e]=t.clone(i)}var t=this.need("river.core.tools"),r={},o={},i=t.isArray,c=t.isObject,a=t.isString,u=t.isNumber,s=t.each,l=t.loop;return n.prototype.apply=function(){var n=r[this.$$ns],i=o[this.$$ns];s(this,function(r,o){n[o]&&!t.expect(i[o]).toEqual(r)&&(e(r,n[o],i[o]),i[o]=t.clone(r))})},n.prototype.watch=function(){},n.prototype.inject=function(e){var n=this;s(e,function(t,r){n[r]=e[r]})},n}),define("river.core.tools",function(){function e(e,n){var t=function(){for(var n in e)e.hasOwnProperty&&e.hasOwnProperty(n)?this[n]=e[n]:t.prototype[n]=e[n]};for(var r in n)t.prototype[r]=n[r];var o=new t;for(var i in o)e[i]=o[i];return e}function n(e){var n=document.createElement("div");return n.innerHTML=e,n.childNodes[0]}function t(){for(var e="$$",n=1;8>=n;n++){var t=Math.floor(16*Math.random()).toString(16);e+=t,(3==n||5==n)&&(e+="-")}return e}function r(e,n){for(var t={},r=0;r<e.length;r++)n.call(t,e[r],r)}function o(e,n){var t={};for(var r in e)e.hasOwnProperty&&e.hasOwnProperty(r)&&n.call(t,e[r],r)}function i(e,n){return window.Object.prototype.toString.call(n)==="[object "+e+"]"}function c(e,n){for(var t in n){var r=i("Object",n[t]),o=i("Array",n[t]),a=r||o;a?(e[t]=r?{}:[],c(e[t],n[t])):e[t]=n[t]}return e}function a(e,n){this._diffFlag=!0;for(var t in n){var r=i("Object",n[t])||i("Array",n[t]);if(r)a.call(this,e[t],n[t]);else{if(!e)return void(this._diffFlag=!1);e[t]!=n[t]&&(this._diffFlag=!1)}}return this._diffFlag}function u(e){function n(n){return t?e==n:r?a.call({},n,e)&&a.call({},e,n):void 0}var t="string"==typeof e||"number"==typeof e||"boolean"==typeof e,r="function"!=typeof e;return{toEqual:n}}var s=(Object.prototype.toString,{inherit:e,compile:n,guid:t,loop:r,each:o,clone:c,expect:u,isArray:function(e){return i("Array",e)},isObject:function(e){return i("Object",e)},isFunction:function(e){return i("Function",e)},isString:function(e){return i("String",e)},isNumber:function(e){return i("Number",e)}});return s}),define("river.grammer.jbind",function(){function e(e){function n(n){n!==o&&(r[e]=n,o=n,r.apply())}var t,r=this.scope,o=this.node.value=r[e];this.node.onfocus=function(){var e=this;t=setInterval(function(){n(e.value)},30)},this.node.onblur=function(){clearInterval(t)}}return e}),define("river.grammer.jChange",function(){function e(e){var n=this.scope[e],t=this.scope;this.node.onchange=function(){n.call({},this.value),t.apply()}}return e}),define("river.grammer.jclick",function(){function e(e){var n=e.replace(/\(.*\)/,""),t=this.scope[n],r=this.scope,o=/\((.*)\)/,i=e.match(o),c=[];i&&i.length&&(c=i[1].split(",")),this.node.onclick=function(){t.apply({},c),r.apply()}}return e}),define("river.grammer.jcompile",function(){return function(){{var e=this.node,n=(this.scope,this.reg);e.textContent.replace(n,"")}}}),define("river.grammer.repeat",function(){function e(e){var t=/.*in\s/,r=/\sin.*/,o=/.*\./,i=e.replace(t,"").replace(o,""),c=this.scope[i],a=e.replace(r,""),u=this.node.parentNode,s=u.removeChild(this.node),l=document.createDocumentFragment(),d=this.reg,f=this.eom[i]=[];s.removeAttribute("repeat"),c&&c.length&&(c.forEach(function(e){var t=s.cloneNode(!0),r={};n(d,t,e,a,r),f.push(r),l.appendChild(t)}),u.appendChild(l))}function n(o,i,c,a,u){var s=!1;if(i.attributes&&i.attributes.length&&Array.prototype.forEach.call(i.attributes,function(n){if(o.test(n.nodeValue)){var t=n.nodeValue.replace(o,"").replace(a+".","");u[t]||(u[t]=[]),u[t].push({element:n,expression:n.nodeValue}),n.nodeValue=n.nodeValue.replace(/{{.*}}/,c[t])}"repeat"===n.nodeName&&(s=!0,r.node=i,r.scope=c,r.reg=o,r.eom=u,e.call(r,n.nodeValue.replace(o,"")))}),o.test(i.nodeValue)){var l=i.nodeValue.replace(o,"").replace(a+".","");u[l]||(u[l]=[]),u[l].push({element:i,expression:i.nodeValue});var d=t.isObject(c)?c[l]:c;i.nodeValue=i.nodeValue.replace(/{{.*}}/,d)}i.childNodes&&i.childNodes.length&&!s&&Array.prototype.forEach.call(i.childNodes,function(e){n(o,e,c,a,u)})}var t=this.need("river.core.tools"),r={};return e}),define("river.grammer.scope",function(){function e(e){var o=n.need(e);if(r.isObject(o))this.scope=o;else if(r.isFunction(o)){var i=new t(e,this.eom);this.scope=i,o.call(i)}else{var c=r.guid();this.scope=new t(c,this.eom)}}var n=this,t=n.need("river.core.model"),r=n.need("river.core.tools");return e});
//# sourceMappingURL=river.map