{"version":3,"file":"dist/river.min.js","sources":["lib/cmd.js","lib/engine.js","lib/scenario.js","lib/core/Date.js","lib/core/model.js","lib/core/tool.js","lib/grammer/jbind.js","lib/grammer/jchange.js","lib/grammer/jclick.js","lib/grammer/jcompile.js","lib/grammer/repeat.js","lib/grammer/scope.js"],"names":["_$river","sandbox","boxes","create","key","fn","toLowerCase","run","context","need","call","undefined","module","define","main","loadGrammer","me","checkAttributes","doc","fatherContext","state","hasRepeat","newContext","scope","node","eom","reg","attributes","length","tool","loop","attr","nodeName","value","nodeValue","replace","grammer","inherit","isFunction","checkText","test","push","element","expression","checkChildren","childNodes","child","scan","this","document","addEventListener","_trigger","type","event","createEvent","initEvent","dispatchEvent","trigger","toString","format","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","RegExp","$1","getFullYear","substr","k","getDateByCity","jetleg","now","Date","local","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","parseInt","getUTCMinutes","getUTCSeconds","date","f","update","last","isString","isNumber","ele","isArray","index","parentNode","appendChild","cloneNode","removeChild","item","isObject","each","Model","ns","ref","_eoms","lasts","$$ns","x","tools","clone","prototype","apply","_eom","val","expect","toEqual","watch","inject","source","target","F","hasOwnProperty","y","z","compile","str","container","createElement","innerHTML","guid","uid","i","n","random","array","obj","name","window","Object","hasChild","diff","_diffFlag","equal","isValue","exports","no","jbind","newValue","oldValue","interval","onfocus","setInterval","onblur","clearInterval","change","onchange","click","param","match","args","split","onclick","textContent","repeat","afterIn","beforeIn","pro","data","frg","createDocumentFragment","_r","removeAttribute","forEach","d","_n","m","trans","Array","$tool","_scope","model"],"mappings":"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"}