{"version":3,"file":"dist/river.min.js","sources":["src/cmd.js","src/engine.js","src/core/Date.js","src/core/model.js","src/core/tool.js","src/grammer/jbind.js","src/grammer/jchange.js","src/grammer/jclick.js","src/grammer/jcompile.js","src/grammer/repeat.js","src/grammer/scope.js"],"names":["_$river","sandbox","boxes","create","key","fn","toLowerCase","run","context","need","call","undefined","module","define","main","loadGrammer","me","checkAttributes","doc","fatherContext","state","hasRepeat","newContext","scope","node","eom","reg","attributes","length","tool","loop","attr","nodeName","value","nodeValue","replace","grammer","inherit","isFunction","checkText","test","push","element","expression","checkChildren","childNodes","child","scan","this","document","addEventListener","toString","format","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","RegExp","$1","getFullYear","substr","k","getDateByCity","jetleg","now","Date","local","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","parseInt","getUTCMinutes","getUTCSeconds","date","f","update","isString","isNumber","ele","isArray","item","index","isObject","each","Model","ns","ref","_eoms","lasts","$$ns","x","last","tools","prototype","apply","_eom","watch","inject","source","target","F","hasOwnProperty","y","guid","uid","i","n","random","array","obj","log","console","Function","arguments","str","no","jbind","onkeyup","change","onchange","click","param","match","args","split","onclick","repeat","afterIn","beforeIn","pro","data","parentNode","removeChild","frg","createDocumentFragment","_r","removeAttribute","forEach","d","_n","cloneNode","m","trans","appendChild","Array","_scope","model"],"mappings":"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"}