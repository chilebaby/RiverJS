{"version":3,"file":"dist/river.min.js","sources":["lib/cmd.js","lib/engine.js","lib/scenario.js","lib/core/Date.js","lib/core/model.js","lib/core/tool.js","lib/grammer/jbind.js","lib/grammer/jchange.js","lib/grammer/jclick.js","lib/grammer/jcompile.js","lib/grammer/repeat.js","lib/grammer/scope.js"],"names":["_$river","sandbox","boxes","create","key","fn","toLowerCase","run","context","need","call","undefined","module","define","main","loadGrammer","me","checkAttributes","doc","fatherContext","state","hasRepeat","newContext","scope","node","eom","reg","attributes","length","tool","loop","attr","nodeName","value","textContent","replace","grammer","inherit","isFunction","checkText","test","push","element","expression","checkChildren","children","child","scan","this","document","addEventListener","_trigger","type","event","createEvent","initEvent","dispatchEvent","trigger","toString","format","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","RegExp","$1","getFullYear","substr","k","getDateByCity","jetleg","now","Date","local","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","parseInt","getUTCMinutes","getUTCSeconds","date","f","update","oldvalue","isString","isNumber","ele","isArray","item","index","isObject","each","Model","ns","ref","_eoms","lasts","$$ns","x","tools","clone","prototype","apply","_eom","last","val","expect","toEqual","watch","inject","source","target","F","hasOwnProperty","y","z","compile","str","container","createElement","innerHTML","childNodes","guid","uid","i","n","random","array","obj","name","window","Object","result","hasChild","diff","_diffFlag","equal","isValue","exports","no","jbind","newValue","oldValue","interval","onfocus","setInterval","onblur","clearInterval","change","onchange","click","param","match","args","split","onclick","repeat","afterIn","beforeIn","pro","data","parentNode","removeChild","frg","createDocumentFragment","_r","removeAttribute","forEach","d","_n","cloneNode","m","trans","appendChild","Array","$tool","_scope","model"],"mappings":"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"}