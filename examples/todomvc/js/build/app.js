define("app",function(){!function(){"use strict"}(window)});define("controller.todos",function(e,t,o){var n=t("model.local"),c=e.todos=n.get();e.newtodo="";function i(){e.activenum=0;e.completednum=0;for(var t=0,o=c.length;t<o;t++){if(c[t].status=="active"){e.activenum++}else{e.completednum++}}}function a(e){i();n.save(e)}e.save=a;i();e.add=function(t){if(t.keyCode==13&&e.newtodo){c.unshift({desc:e.newtodo,status:"active"});e.newtodo="";a(c)}};e.remove=function(e){var t=c.indexOf(e);c.splice(t,1);a(c)};e.toggleall=function(){c.forEach(function(t,o){if(e.completednum>=0&&e.completednum<c.length){t.status="completed"}else{t.status="active"}});a(c)};e.toggleStatus=function(e){if(e.status=="active"){e.status="completed"}else{e.status="active"}a(c)};e.removeCompleted=function(){e.completednum=0;c=e.todos=c.filter(function(e,t){if(e.status!="completed"){return true}});a(c)}});define("model.local",function(e,t,o){var n="todos-riverjs";e.get=function(){return JSON.parse(localStorage.getItem(n)||"[]")};e.save=function(e){localStorage.setItem(n,JSON.stringify(e))}});define("river.grammer.footer",function(e,t,o){var n=t("util.route"),c="selected";e=o.exports=i;function i(e,t,o){n.when("#/",function(){var e=o.querySelectorAll("#filters a");a(e);e[0].className=c}).when("#/active",function(){var e=o.querySelectorAll("#filters a");a(e);e[1].className=c}).when("#/completed",function(){var e=o.querySelectorAll("#filters a");a(e);e[2].className=c});n.nav()}function a(e){for(var t=0,o=e.length;t<o;t++){e[t].className=""}}});define("river.grammer.todo",function(e,t,o){var n=t("util.route"),c=t("controller.todos");e=o.exports=i;function i(e,t,o){var c=o.querySelector("[type=checkbox]");var i=o.querySelector(".edit");var u=o.querySelector("label");n.when("#/",function(){o.style.display="block"}).when("#/active",function(){var e=a(t);if(e=="active"){o.style.display="block"}else if(e=="completed"){o.style.display="none"}}).when("#/completed",function(){var e=a(t);if(e=="active"){o.style.display="none"}else if(e=="completed"){o.style.display="block"}});n.nav();t.onchange("status",function(e,t){n.nav()});u.ondblclick=function(){s(o)};i.addEventListener("blur",function(){l(o,t)});i.onkeydown=function(e){var n=e.keyCode===13||false;var c=e.keyCode===27||false;if(n||c){l(o,t)}}}function a(e){return e.todo.status}function s(e){var t=e.className;e.className=t+" editing";e.querySelector(".edit").focus()}function l(e,t){var o=e.className;e.className=o.replace(/\sediting/,"");c.save(t.todos)}});define("util.route",function(exports,require,module){var pages={};function route(){var addr=location.hash;if(pages[addr]&&typeof pages[addr]=="function")pages[addr]()}window.addEventListener("hashchange",function(){route()});exports.nav=function(){route()};exports.when=function(id,fn){pages[id]=fn;return this}});//# sourceMappingURL=app.map