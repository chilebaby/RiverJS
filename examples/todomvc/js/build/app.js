define("app",function(){!function(){"use strict"}(window)});define("model.local",function(t,e,n){var o="todos-riverjs";t.get=function(){return JSON.parse(localStorage.getItem(o)||"[]")};t.save=function(t){localStorage.setItem(o,JSON.stringify(t))}});define("controller.todos",function(t,e,n){var o=e("model.local"),i=t.todos=o.get();t.newtodo="";function c(){t.activenum=0;t.completednum=0;for(var e=0,n=i.length;e<n;e++){if(i[e].status=="active"){t.activenum++}else{t.completednum++}}}function u(t){c();o.save(t)}t.save=u;c();t.add=function(e){if(e.keyCode==13&&t.newtodo){i.unshift({desc:t.newtodo,status:"active"});t.newtodo="";u(i)}};t.remove=function(t){var e=i.indexOf(t);i.splice(e,1);u(i)};t.toggleall=function(){i.forEach(function(e,n){if(t.completednum>=0&&t.completednum<i.length){e.status="completed"}else{e.status="active"}});u(i)};t.toggleStatus=function(t){if(t.status=="active"){t.status="completed"}else{t.status="active"}u(i)};t.removeCompleted=function(){t.completednum=0;i=t.todos=i.filter(function(t,e){if(t.status!="completed"){return true}});u(i)}});define("util.route",function(t,e,n){var o={};function i(){var t=location.hash;if(o[t]&&typeof o[t]=="function")o[t]()}window.addEventListener("hashchange",function(){i()});t.nav=function(){i()};t.when=function(t,e){o[t]=e;return this}});define("river.grammer.footer",function(t,e,n){var o=e("util.route"),i="selected";t=n.exports=c;function c(t,e,n){o.when("#/",function(){var t=n.querySelectorAll("#filters a");u(t);t[0].className=i}).when("#/active",function(){var t=n.querySelectorAll("#filters a");u(t);t[1].className=i}).when("#/completed",function(){var t=n.querySelectorAll("#filters a");u(t);t[2].className=i});o.nav()}function u(t){for(var e=0,n=t.length;e<n;e++){t[e].className=""}}});define("river.grammer.todo",function(exports,require,module){var route=require("util.route"),ctrl=require("controller.todos");exports=module.exports=todo;function todo(str,scope,element){var checkbox=element.querySelector("[type=checkbox]");var editinput=element.querySelector(".edit");var label=element.querySelector("label");route.when("#/",function(){element.style.display="block"}).when("#/active",function(){var sta=status(scope);if(sta=="active"){element.style.display="block"}else if(sta=="completed"){element.style.display="none"}}).when("#/completed",function(){var sta=status(scope);if(sta=="active"){element.style.display="none"}else if(sta=="completed"){element.style.display="block"}});route.nav();scope.onchange("status",function(newvalue,oldvalue){route.nav()});label.ondblclick=function(){writeView(element)};editinput.addEventListener("blur",function(){readView(element,scope)});editinput.onkeydown=function(event){var enter=event.keyCode===13||false;var esc=event.keyCode===27||false;if(enter||esc){readView(element,scope)}}}function status(scope){return scope.todo.status}function writeView(element){var t=element.className;element.className=t+" editing";element.querySelector(".edit").focus()}function readView(element,scope){var t=element.className;element.className=t.replace(/\sediting/,"");ctrl.save(scope.todos)}});//# sourceMappingURL=app.map